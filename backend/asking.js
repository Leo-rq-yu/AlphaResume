const axios = require('axios');

const BASE_URL = 'http://localhost:8080/api';

const userAccount = "+8613387543505";

const initialMessage = {
  "userAccount": userAccount,
  "messages": [
    {
      "question": "[xxx]你好，我是你的简历规划师[xxx]，在帮助你制作一份[应届生求职]简历之前，我需要了解你的一些个人基本信息和过往学习实习经历，对话可以随时开始或暂停，你的资料会被妥善保存，仅用于简历制作。\n 此次交流仅作为初步信息搜集，如有遗漏不用担心，你可以随时告诉我们，我们将为你修改并补充。首先，您能提供一下您的基本信息吗？包括姓名、联系电话、电子邮件和微信号。",
      "answer": "张三，13387543505，1286668885@qq.com,black317"
    }
  ],
  "phoneNumber": userAccount
};

const answers = [
  {
    "quesId": 2,
    "answer": "当然，作为一名应届生，我认为自己是一个积极主动、快速学习且具有较强责任心的人。我的个人评价可以从以下几个方面展开：\n" +
      "优势：\n" +
      "- 数据分析能力：在校期间，我通过选修数据分析课程及参与实际项目，掌握了Python、Excel等工具，能够高效处理数据，从数据中提炼有价值的信息，为决策提供支持。\n" +
      "- 沟通协调能力：在团队项目和实习经历中，我经常担任协调者的角色，有效促进跨部门沟通，确保项目顺利进行。我擅长倾听他人意见，并能够清晰、有条理地表达自己的观点。\n" +
      "- 创新思维与解决问题能力：面对挑战，我习惯于跳出传统框架思考，寻找新颖的解决方案。曾在一项产品改进项目中，通过引入用户共创模式，显著提高了用户满意度和参与度。\n" +
      "- 持续学习态度：我坚信在这个快速变化的行业中，持续学习是至关重要的。因此，我经常阅读最新的行业报告、参加在线课程，不断提升自己在产品运营、市场营销等领域的知识。\n" +
      "工作态度：\n" +
      "我秉持着“细节决定成败”的工作态度，对待每一项任务都力求精益求精。面对压力，我能够保持冷静，合理安排时间与资源，确保按时完成高质量的工作。同时，我非常重视团队合作，相信良好的团队氛围能够激发出更大的创造力和生产力。\n" +
      "职业目标：\n" +
      "短期来看，我希望能在一家富有创新精神的企业中，作为产品运营团队的一员，将我所学应用于实践，通过不断的实践与学习，深入理解用户需求，提升产品市场竞争力。长期而言，我的目标是成为一名资深的产品运营经理，负责推动产品从概念到市场成功的全过程，同时，我也期望能够领导团队，培养更多优秀的运营人才，共同为公司创造更大的价值。\n" +
      "综上所述，我是一位对产品运营充满热情、具备扎实技能基础、注重团队协作且拥有明确职业规划的年轻人，期待能在贵公司开启我的职业生涯，共同成长，共创辉煌。"
  },
  {
    "quesId": 3,
    "answer": "当然，以下是按学历从高到低排列的我的教育背景信息：\n" +
      "1. 硕士研究生\n" +
      "  - 学校名称：北京大学\n" +
      "  - 专业：信息技术与管理\n" +
      "  - 城市：北京\n" +
      "  - 国家：中国\n" +
      "  - 起止时间：2020年9月至2023年7月\n" +
      "  - 院系：信息科学技术学院\n" +
      "  - GPA：3.9/4.0\n" +
      "  - 排名：班级前5%\n" +
      "  - 获奖记录：获得“优秀毕业生”称号，参与的科研项目荣获“全国大学生创新创业大赛”一等奖。\n" +
      "  - 主修课程：数据挖掘、人工智能原理、项目管理、高级数据库系统、信息技术战略管理等。\n" +
      "2. 本科\n" +
      "  - 学校名称：浙江大学\n" +
      "  - 专业：计算机科学与技术\n" +
      "  - 城市：杭州\n" +
      "  - 国家：中国\n" +
      "  - 起止时间：2016年9月至2020年7月\n" +
      "  - 院系：计算机科学与技术学院\n" +
      "  - GPA：3.8/4.0\n" +
      "  - 排名：年级前10%\n" +
      "  - 获奖记录：连续三年获得校级奖学金，参与开发的移动应用项目在“中国大学生软件设计大赛”中获得二等奖。\n" +
      "  - 主修课程：算法设计与分析、操作系统、计算机网络、数据库系统原理、软件工程、人机交互等。"
  },
  {
    "quesId": 4,
    "answer": "当然，以下是按时间倒序排列的我的实习经历：\n" +
      "1. 阿里巴巴集团 - 产品运营实习生\n" +
      "  - 公司名称：阿里巴巴集团\n" +
      "  - 城市：杭州\n" +
      "  - 国家：中国\n" +
      "  - 起止时间：2022年7月至2022年9月\n" +
      "  - 部门：淘宝事业部 - 用户增长团队\n" +
      "  - 职责&业绩描述：负责淘宝APP的新用户引导流程优化，通过用户行为数据分析，识别用户体验瓶颈，提出并实施改进方案，最终实现新用户激活率提升15%。参与策划并执行“双十一”大促活动，通过精准营销策略和内容运营，助力活动页面访问量增长30%，有效促进了用户转化与留存。同时，协同产品、技术团队，推进用户反馈机制的建立，提高了用户反馈响应速度和满意度。\n" +
      "2. 腾讯科技 - 数据分析实习生\n" +
      "  - 公司名称：腾讯科技\n" +
      "  - 城市：深圳\n" +
      "  - 国家：中国\n" +
      "  - 起止时间：2021年6月至2021年8月\n" +
      "  - 部门：微信支付部 - 数据分析组\n" +
      "  - 职责&业绩描述：参与微信支付交易数据的日常监控与分析，通过SQL和Python处理大规模数据集，发现交易异常并及时上报，协助减少潜在风险。参与构建用户消费行为模型，为产品优化和市场策略提供数据支持，通过模型预测准确率提高至85%，为部门决策提供了有力的数据依据。"
  },
  {
    "quesId": 5,
    "answer": "虽然作为一个AI模型，我没有亲自参与任何实际项目，但我可以提供一个示例框架，帮助您构思如何描述自己参与过的项目：\n" +
      "项目示例\n" +
      "好的，以下是我参加的项目：\n" +
      "项目名称：SmartFit健康管理系统\n" +
      "城市, 国家：上海, 中国\n" +
      "起止时间：2022年3月 - 2023年6月\n" +
      "项目链接：http://smartfitproject.example.com \n" +
      "项目角色：产品经理兼运营负责人\n" +
      "项目描述：\n" +
      "SmartFit是一个面向职场人士的健康管理平台，旨在通过AI技术分析用户的饮食、运动及睡眠数据，提供个性化的健康改善建议。项目整合了智能穿戴设备、营养数据库和心理压力测评工具，形成全方位的健康管理生态系统。我在项目中负责产品规划、用户调研、需求定义以及市场推广策略的制定与执行。\n" +
      "项目成就：\n" +
      "- 成功上线后，三个月内积累了超过10万注册用户，日活跃用户达到5千人。\n" +
      "- 通过精准的健康建议推送，用户平均健康指数提升20%，用户满意度达到90%以上。\n" +
      "- 荣获“2023年度最佳健康管理应用”奖项，吸引了多家媒体的关注与报道。\n" +
      "项目职责：\n" +
      "- 深入进行市场调研，分析竞品，明确产品差异化定位。\n" +
      "- 组织跨部门会议，协调设计、技术团队，确保产品按时交付并符合市场需求。\n" +
      "- 设计并执行用户增长策略，包括社交媒体营销、合作伙伴关系建立和线上线下活动策划。\n" +
      "- 监控用户反馈，持续优化产品功能，提升用户体验。\n" +
      "- 制定并跟踪关键绩效指标(KPIs)，定期向高层汇报项目进展与成果。"
  },
  {
    "quesId": 6,
    "answer": "奖项示例\n" +
      "1. 奖项名称：全国大学生创新创意大赛一等奖\n" +
      "  - 颁奖机构：教育部高等教育司、中国大学生创新创意协会\n" +
      "  - 获奖级别：国家级\n" +
      "  - 获奖时间：2023年5月\n" +
      "  - 获奖名次：一等奖（团队项目）\n" +
      "  - 简要描述：作为团队核心成员，参与设计并开发了一款名为“EcoTrack”的环保监测与数据分析系统，该系统利用物联网技术监测水质污染，并通过大数据分析提供环境治理建议。项目因其创新性、实用性和对社会的积极影响，从全国近3000个参赛作品中脱颖而出，荣获一等奖。\n" +
      "2. 奖项名称：校级优秀毕业论文奖\n" +
      "  - 颁奖机构：北京大学信息科学技术学院\n" +
      "  - 获奖级别：校级\n" +
      "  - 获奖时间：2023年7月\n" +
      "  - 获奖名次：一等奖\n" +
      "  - 简要描述：我的毕业论文《基于深度学习的用户行为预测模型研究》在分析大量用户数据的基础上，提出了一个新的预测模型，有效提高了预测精度，为个性化推荐系统提供了理论支撑。该论文因其严谨的研究方法、创新性及实际应用潜力，被评选为校级优秀毕业论文一等奖。"
  },
  {
    "quesId": 7,
    "answer": "证书示例：\n" +
      "1. 证书名称：心理咨询师继续教育培训证书\n" +
      "  - 颁发机构：中国心理卫生协会\n" +
      "  - 取得时间：根据个人实际取得时间填写\n" +
      "  - 证书详情：成功完成心理咨询领域的继续教育课程，涵盖心理咨询理论、技巧及伦理规范，进一步提升了专业服务能力。\n" +
      "2. 证书名称：证券从业资格证书\n" +
      "  - 颁发机构：中国证券业协会\n" +
      "  - 取得时间：2016年11月\n" +
      "  - 证书详情：通过中国证券业协会组织的证券从业资格考试，获得了进入证券行业的准入资格，证明了对证券市场基本法规和专业知识的掌握。"
  },
  {
    "quesId": 8,
    "answer": "语言：\n" +
      "- 语言： 英语\n" +
      "- 熟练程度： 流利\n" +
      "- 证书： 雅思总分7.5分（听力8.0，阅读8.5，写作7.0，口语7.5），2022年10月获得\n" +
      "- 语言： 日语\n" +
      "- 熟练程度： 高级\n" +
      "- 证书： 日本语能力测试N1级别，2021年12月合格。"
  }
];

const sendInitialMessage = async () => {
  try {
    const response = await axios.post(`${BASE_URL}/resume-chat`, initialMessage);
    const { id, message, quesId, resumeId } = response.data;
    console.log(`Initial chat created with ID: ${id}, resumeId: ${resumeId}, next question: ${message}`);
    return { id, resumeId };
  } catch (error) {
    console.error('Error sending initial message:', error);
  }
};

const sendMessage = async (id, quesId, answer) => {
  try {
    const response = await axios.put(`${BASE_URL}/resume-chat/${id}`, { quesId, answer });
    console.log(`Message sent: quesId ${quesId}, answer: ${answer}`);
    return response.data;
  } catch (error) {
    console.error(`Error sending message for quesId ${quesId}:`, error);
  }
};

const main = async () => {
  const { id, resumeId } = await sendInitialMessage();

  for (const answer of answers) {
    await sendMessage(id, answer.quesId, answer.answer);
  }

  console.log('All messages sent successfully.');
};

main();
